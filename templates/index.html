{% extends 'layout.html' %}

{% block title %}Command Center // Modern Ops{% endblock %}

{% block content %}
<div class="flex flex-col gap-8">
  <!-- Header Section -->
  <div class="flex flex-col md:flex-row md:items-end justify-between gap-4 mb-2 pb-6 border-b border-border">
    <div>
      <div class="flex items-center gap-2 mb-1">
        <span class="text-primary text-[10px] font-mono tracking-[0.2em] uppercase">system_overview // dashboard</span>
        <span class="h-px w-8 bg-primary/30"></span>
      </div>
      <h2 class="font-display text-3xl font-bold text-white tracking-tight">Command Center</h2>
      <p class="text-muted mt-2 font-mono text-xs">Real-time Directory Services monitor and operational status.</p>
    </div>
    <div class="flex items-center gap-3">
      <a href="{{ url_for('create_user') }}" class="relative group">
        <div
          class="absolute -inset-0.5 bg-gradient-to-r from-primary to-blue-600 rounded-sm opacity-20 group-hover:opacity-40 transition duration-200 blur">
        </div>
        <button
          class="relative flex items-center gap-2 bg-surface border border-border px-4 py-2 rounded-sm hover:border-primary/50 transition-colors">
          <span class="material-symbols-outlined text-primary text-sm">person_add</span>
          <span class="text-sm font-mono text-white">NEW_PROVISION</span>
        </button>
      </a>
    </div>
  </div>

  <!-- Stats Grid -->
  <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
    <!-- Stat Card 1 -->
    <div
      class="bg-surface border border-border p-5 rounded hover:border-error/50 transition-colors group relative overflow-hidden">
      <div class="absolute top-0 right-0 p-3 opacity-20 group-hover:opacity-40 transition-opacity">
        <span class="material-symbols-outlined text-4xl text-error">lock_person</span>
      </div>
      <p class="text-muted text-[10px] font-mono uppercase tracking-widest mb-2">Locked Accounts</p>
      <div class="flex items-baseline gap-2">
        <span class="font-display font-bold text-4xl text-error drop-shadow-[0_0_8px_rgba(239,68,68,0.4)]">3</span>
        <span class="text-[10px] text-error/80 font-mono">ACTION_REQ</span>
      </div>
      <div class="mt-4 pt-3 border-t border-border/50 flex items-center justify-between">
        <span class="text-[10px] text-text-muted font-mono uppercase">Since 08:00 AM</span>
        <button class="text-[10px] text-primary hover:text-white hover:underline font-mono">VIEW_LIST ></button>
      </div>
    </div>

    <!-- Stat Card 2 -->
    <div
      class="bg-surface border border-border p-5 rounded hover:border-yellow-500/50 transition-colors group relative overflow-hidden">
      <div class="absolute top-0 right-0 p-3 opacity-20 group-hover:opacity-40 transition-opacity">
        <span class="material-symbols-outlined text-4xl text-yellow-500">key_off</span>
      </div>
      <p class="text-muted text-[10px] font-mono uppercase tracking-widest mb-2">Pwd Expires < 7d</p>
          <div class="flex items-baseline gap-2">
            <span class="font-display font-bold text-4xl text-yellow-500">12</span>
            <span class="text-[10px] text-yellow-500/80 font-mono">WARNING</span>
          </div>
          <div class="mt-4 pt-3 border-t border-border/50 flex items-center justify-between">
            <span class="text-[10px] text-text-muted font-mono uppercase">Batch notify</span>
            <button class="text-[10px] text-primary hover:text-white hover:underline font-mono">RUN_SYNC ></button>
          </div>
    </div>

    <!-- Stat Card 3 -->
    <div
      class="bg-surface border border-border p-5 rounded hover:border-primary/30 transition-colors group relative overflow-hidden">
      <div class="absolute top-0 right-0 p-3 opacity-10 group-hover:opacity-30 transition-opacity">
        <span class="material-symbols-outlined text-4xl text-white">sync_alt</span>
      </div>
      <p class="text-muted text-[10px] font-mono uppercase tracking-widest mb-2">Dir Sync Latency</p>
      <div class="flex items-baseline gap-2">
        <span class="font-display font-bold text-4xl text-text-main">14ms</span>
        <span class="text-[10px] text-success font-mono">OPTIMAL</span>
      </div>
      <div class="mt-4 pt-3 border-t border-border/50 flex items-center justify-between">
        <span class="text-[10px] text-text-muted font-mono uppercase">Last 24 hours</span>
        <button class="text-[10px] text-text-muted hover:text-white hover:underline font-mono">LATENCY_LOG ></button>
      </div>
    </div>
  </div>

  <!-- Operational Feed -->
  <div class="flex flex-col h-[400px]">
    <div class="flex items-center justify-between mb-3 px-1">
      <h2 class="text-sm font-display font-bold text-text-main tracking-widest uppercase flex items-center gap-2">
        <span class="material-symbols-outlined text-primary text-sm">terminal</span>
        Execution_Log_Stream
      </h2>
      <div class="flex items-center gap-2">
        <span class="h-2 w-2 rounded-full bg-primary/50 animate-pulse"></span>
        <span class="text-[10px] font-mono text-primary uppercase tracking-[0.2em]">Live Feed</span>
      </div>
    </div>
    <div
      class="flex-1 bg-black/80 backdrop-blur-sm border border-border rounded p-4 font-mono text-xs overflow-hidden relative group">
      <div
        class="absolute inset-0 bg-[linear-gradient(rgba(18,16,16,0)_50%,rgba(0,0,0,0.25)_50%),linear-gradient(90deg,rgba(255,0,0,0.06),rgba(0,255,0,0.02),rgba(0,0,255,0.06))] z-0 pointer-events-none bg-[length:100%_2px,3px_100%] opacity-30">
      </div>
      <div class="relative z-10 flex flex-col gap-3 h-full overflow-y-auto pr-2 scrollbar-thin scrollbar-thumb-border">

        <div class="flex gap-3 text-muted border-l-2 border-transparent hover:border-primary pl-2 transition-colors">
          <span class="text-muted/50 whitespace-nowrap">[14:02:22]</span>
          <div class="flex flex-col">
            <span class="text-primary font-bold uppercase">Auth_Session_Started <span
                class="text-text-muted font-normal">::</span> <span class="text-white">{{ session['user']
                }}</span></span>
            <span class="text-success mt-1 flex items-center gap-1 font-bold">
              <span class="material-symbols-outlined text-[12px]">verified</span> BIND_SUCCESS (72ms)
            </span>
          </div>
        </div>

        <div class="flex gap-3 text-muted border-l-2 border-transparent hover:border-primary pl-2 transition-colors">
          <span class="text-muted/50 whitespace-nowrap">[13:58:10]</span>
          <div class="flex flex-col">
            <span class="text-primary font-bold uppercase">Domain_Controller_Poll <span
                class="text-text-muted font-normal">::</span> <span class="text-white">Active</span></span>
            <span class="text-success mt-1 flex items-center gap-1">
              <span class="material-symbols-outlined text-[12px]">check</span> NO_DRIFT_DETECTED
            </span>
          </div>
        </div>

        <div
          class="flex gap-3 text-muted border-l-2 border-transparent hover:border-primary pl-2 transition-colors opacity-70">
          <span class="text-muted/50 whitespace-nowrap">[13:45:00]</span>
          <div class="flex flex-col">
            <span class="text-yellow-500 font-bold uppercase">GPO_Policy_Refresh <span
                class="text-text-muted font-normal">::</span> <span class="text-white">Applied</span></span>
            <span class="text-muted mt-1 flex items-center gap-1 italic">
              System configuration synchronized across all nodes.
            </span>
          </div>
        </div>

        <div class="mt-2 animate-pulse text-primary font-bold text-lg">_</div>
      </div>
    </div>
  </div>
</div>
{% endblock %}